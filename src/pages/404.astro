---
import BaseLayout from "@/layouts/BaseLayout.astro";
import Paw from "@/components/ui/Paw.astro";

const title = "404";

// Generate paired paws in a wavy line across bottom 1/3 of page
// Each step has two paws side by side (mirrored left/right paws)
const stepCount = 6;
const paws: Array<{ x: number; y: number; rotation: number; delay: number; mirror: boolean; scale: number }> = [];

for (let i = 0; i < stepCount; i++) {
  const progress = i / (stepCount - 1);
  const x = 8 + progress * 80; // 8% to 88%
  const baseY = 70; // Moved up from bottom
  const waveOffset = Math.sin(progress * Math.PI * 2) * 6; // Gentle wave
  const y = baseY + waveOffset;

  // Base rotation ~100deg to face right (direction of travel)
  const baseRotation = 100 + (Math.random() - 0.5) * 10;

  // Scale increases as paws progress across page (1.4 to 2.8) - 2x larger
  const scale = 1.4 + progress * 1.4;

  const delay = i * 1.0; // 1 second between each step

  // Offset increases with scale to prevent overlap
  const xOffset = 2 + scale * 1.5;
  const yOffset = 3 + scale * 2;

  // Left paw (above center line)
  paws.push({
    x: x - xOffset,
    y: y - yOffset,
    rotation: baseRotation,
    delay,
    mirror: false,
    scale,
  });

  // Right paw (below center line, mirrored horizontally)
  paws.push({
    x: x + xOffset,
    y: y + yOffset,
    rotation: baseRotation,
    delay: delay + 0.35, // Longer delay between left and right paw
    mirror: true,
    scale,
  });
}
---

<BaseLayout titleShort={title}>
  <!-- Animated paw trail in bottom 1/3 (fixed to viewport) -->
  <div class="pointer-events-none fixed inset-0 z-0">
    {paws.map((paw) => <Paw {...paw} />)}
  </div>

  <!-- Text content in top 2/3 -->
  <main class="relative z-10 flex h-[66vh] flex-col items-center justify-center px-6 text-center">
    <span class="text-content-4 font-serif text-8xl leading-none font-bold sm:text-9xl md:text-[12rem]">
      404
    </span>
    <p class="text-content-2 mt-4 text-lg md:text-xl">page not found</p>
    <a
      href="/"
      class="text-content-3 hover:text-content-2 focus-outline-rounded mt-6 font-semibold transition-colors"
    >
      &larr; back home
    </a>
  </main>
</BaseLayout>
