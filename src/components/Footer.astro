---
import { socials } from '../data/socials';
import { Icon } from 'astro-icon/components';

const navbarClasses = "soft-transition hover:font-semibold hover:text-content-2 focus-outline-rounded"

---

<footer class="md:sticky md:bottom-0 md:z-50 bg-surface-1 text-content-2 p-3">
  <div class="
    mx-auto max-w-6xl w-full
    flex flex-col gap-4
    md:grid md:grid-cols-3 md:items-center md:gap-6
  ">
    <!-- Left -->
    <div class="
      flex gap-3 justify-center md:justify-start items-center
      font-header text-base font-light tracking-wide text-content-3
      ">
      <a href="/colophon" class={navbarClasses}>colophon</a>
      <a href="https://github.com/mayasheth/mayasheth-v2" target="_blank" rel="noopener" class={navbarClasses}>source</a>
    </div>
    <!-- Center -->
    <div class="
      carbon-badge flex justify-center items-center gap-2
      ">
      <Icon name="mdi--foot-print" class="w-auto h-7 text-content-4" />
      <p id="carbon-value" class="font-mono text-content-2 text-lg"> ... </p>
      <span class="font-header text-sm md:text-base tracking-wide text-content-3 font-light">g COâ‚‚e/view</span>
      <Icon name="mdi--foot-print" class="w-auto h-7 text-content-4 -scale-x-100" />
    </div>
    <!-- Right -->
    <div class="
      socials flex flex-wrap justify-center md:justify-end gap-1.5 md:gap-3 items-center
     ">
      <span class="font-header text-base tracking-wide text-content-4 font-semibold">connect</span>
      {socials.map(social => (
        <a
          href={social.href}
          target="_blank"
          rel="noopener noreferrer"
          aria-label={social.name}
          class="hover:text-content-1 transition"
        >
          <Icon
            name={social.icon}
            class="w-4 h-4 md:w-6 md:h-6 text-content-3 hover:text-content-2 hover:scale-105 soft-transition" />
        </a>
      ))}
    </div>
  </div>


  <script>
  (async () => {
    const route = window.location.pathname.replace(/\/$/, '') || '/';
    const res = await fetch('/page-carbon.json');
    const pageCarbon = await res.json();
    const label = pageCarbon[route].toFixed(3) ?? '--';
    const el = document.getElementById('carbon-value');
    if (el) el.textContent = label;
  })();
  </script>
</footer>
